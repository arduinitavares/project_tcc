{
  "extraction_metadata": {
    "timestamp": "2026-02-03T15:34:18.664564+00:00",
    "db_path": "C:\\Users\\mjnrc\\projects\\project_tcc\\db\\spec_authority_dev.db",
    "db_filename": "spec_authority_dev.db",
    "commit_hash": "a6ac985b1c20"
  },
  "schema": {
    "tables": [
      {
        "name": "compiled_spec_authority",
        "columns": [
          {
            "name": "authority_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "spec_version_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          },
          {
            "name": "compiler_version",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "prompt_hash",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "compiled_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "scope_themes",
            "type": "TEXT",
            "notnull": true,
            "pk": false
          },
          {
            "name": "invariants",
            "type": "TEXT",
            "notnull": true,
            "pk": false
          },
          {
            "name": "eligible_feature_ids",
            "type": "TEXT",
            "notnull": true,
            "pk": false
          },
          {
            "name": "rejected_features",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "spec_gaps",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "compiled_artifact_json",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          }
        ],
        "row_count": 4
      },
      {
        "name": "epics",
        "columns": [
          {
            "name": "epic_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "title",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "summary",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "created_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "updated_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "theme_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          }
        ],
        "row_count": 25
      },
      {
        "name": "features",
        "columns": [
          {
            "name": "feature_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "title",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "description",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "created_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "updated_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "epic_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          },
          {
            "name": "delivery_role",
            "type": "VARCHAR",
            "notnull": false,
            "pk": false
          }
        ],
        "row_count": 126
      },
      {
        "name": "product_personas",
        "columns": [
          {
            "name": "persona_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "product_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          },
          {
            "name": "persona_name",
            "type": "VARCHAR(100)",
            "notnull": true,
            "pk": false
          },
          {
            "name": "is_default",
            "type": "BOOLEAN",
            "notnull": true,
            "pk": false
          },
          {
            "name": "category",
            "type": "VARCHAR(50)",
            "notnull": true,
            "pk": false
          },
          {
            "name": "description",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "created_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          }
        ],
        "row_count": 0
      },
      {
        "name": "product_teams",
        "columns": [
          {
            "name": "product_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "team_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          }
        ],
        "row_count": 1
      },
      {
        "name": "products",
        "columns": [
          {
            "name": "product_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "name",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "description",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "vision",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "roadmap",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "technical_spec",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "spec_file_path",
            "type": "VARCHAR",
            "notnull": false,
            "pk": false
          },
          {
            "name": "spec_loaded_at",
            "type": "DATETIME",
            "notnull": false,
            "pk": false
          },
          {
            "name": "created_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "updated_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          }
        ],
        "row_count": 3
      },
      {
        "name": "spec_authority_acceptance",
        "columns": [
          {
            "name": "id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "product_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          },
          {
            "name": "spec_version_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          },
          {
            "name": "status",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "policy",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "decided_by",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "decided_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "rationale",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "compiler_version",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "prompt_hash",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "spec_hash",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          }
        ],
        "row_count": 4
      },
      {
        "name": "spec_registry",
        "columns": [
          {
            "name": "spec_version_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "product_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          },
          {
            "name": "spec_hash",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "content",
            "type": "TEXT",
            "notnull": true,
            "pk": false
          },
          {
            "name": "content_ref",
            "type": "VARCHAR",
            "notnull": false,
            "pk": false
          },
          {
            "name": "status",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "created_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "approved_at",
            "type": "DATETIME",
            "notnull": false,
            "pk": false
          },
          {
            "name": "approved_by",
            "type": "VARCHAR",
            "notnull": false,
            "pk": false
          },
          {
            "name": "approval_notes",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          }
        ],
        "row_count": 5
      },
      {
        "name": "sprint_stories",
        "columns": [
          {
            "name": "sprint_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "story_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "added_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          }
        ],
        "row_count": 5
      },
      {
        "name": "sprints",
        "columns": [
          {
            "name": "sprint_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "goal",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "start_date",
            "type": "DATE",
            "notnull": true,
            "pk": false
          },
          {
            "name": "end_date",
            "type": "DATE",
            "notnull": true,
            "pk": false
          },
          {
            "name": "status",
            "type": "VARCHAR(9)",
            "notnull": true,
            "pk": false
          },
          {
            "name": "created_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "updated_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "product_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          },
          {
            "name": "team_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          }
        ],
        "row_count": 1
      },
      {
        "name": "story_completion_logs",
        "columns": [
          {
            "name": "log_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "story_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          },
          {
            "name": "old_status",
            "type": "VARCHAR(11)",
            "notnull": true,
            "pk": false
          },
          {
            "name": "new_status",
            "type": "VARCHAR(11)",
            "notnull": true,
            "pk": false
          },
          {
            "name": "resolution",
            "type": "VARCHAR(22)",
            "notnull": false,
            "pk": false
          },
          {
            "name": "delivered",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "evidence",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "known_gaps",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "follow_ups_created",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "changed_by",
            "type": "VARCHAR",
            "notnull": false,
            "pk": false
          },
          {
            "name": "changed_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          }
        ],
        "row_count": 0
      },
      {
        "name": "tasks",
        "columns": [
          {
            "name": "task_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "description",
            "type": "TEXT",
            "notnull": true,
            "pk": false
          },
          {
            "name": "status",
            "type": "VARCHAR(11)",
            "notnull": true,
            "pk": false
          },
          {
            "name": "created_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "updated_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "story_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          },
          {
            "name": "assigned_to_member_id",
            "type": "INTEGER",
            "notnull": false,
            "pk": false
          }
        ],
        "row_count": 0
      },
      {
        "name": "team_members",
        "columns": [
          {
            "name": "member_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "name",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "email",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "created_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "updated_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          }
        ],
        "row_count": 0
      },
      {
        "name": "team_memberships",
        "columns": [
          {
            "name": "team_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "member_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "role",
            "type": "VARCHAR(13)",
            "notnull": true,
            "pk": false
          }
        ],
        "row_count": 0
      },
      {
        "name": "teams",
        "columns": [
          {
            "name": "team_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "name",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "created_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "updated_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          }
        ],
        "row_count": 2
      },
      {
        "name": "themes",
        "columns": [
          {
            "name": "theme_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "title",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "description",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "time_frame",
            "type": "VARCHAR(5)",
            "notnull": false,
            "pk": false
          },
          {
            "name": "created_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "updated_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "product_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          }
        ],
        "row_count": 25
      },
      {
        "name": "user_stories",
        "columns": [
          {
            "name": "story_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "title",
            "type": "VARCHAR",
            "notnull": true,
            "pk": false
          },
          {
            "name": "story_description",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "acceptance_criteria",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "status",
            "type": "VARCHAR(11)",
            "notnull": true,
            "pk": false
          },
          {
            "name": "story_points",
            "type": "INTEGER",
            "notnull": false,
            "pk": false
          },
          {
            "name": "rank",
            "type": "VARCHAR",
            "notnull": false,
            "pk": false
          },
          {
            "name": "persona",
            "type": "VARCHAR(100)",
            "notnull": false,
            "pk": false
          },
          {
            "name": "resolution",
            "type": "VARCHAR(22)",
            "notnull": false,
            "pk": false
          },
          {
            "name": "completion_notes",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "evidence_links",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "completed_at",
            "type": "DATETIME",
            "notnull": false,
            "pk": false
          },
          {
            "name": "original_acceptance_criteria",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "ac_updated_at",
            "type": "DATETIME",
            "notnull": false,
            "pk": false
          },
          {
            "name": "ac_update_reason",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "accepted_spec_version_id",
            "type": "INTEGER",
            "notnull": false,
            "pk": false
          },
          {
            "name": "validation_evidence",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "created_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "updated_at",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "product_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": false
          },
          {
            "name": "feature_id",
            "type": "INTEGER",
            "notnull": false,
            "pk": false
          }
        ],
        "row_count": 9
      },
      {
        "name": "workflow_events",
        "columns": [
          {
            "name": "event_id",
            "type": "INTEGER",
            "notnull": true,
            "pk": true
          },
          {
            "name": "event_type",
            "type": "VARCHAR(20)",
            "notnull": true,
            "pk": false
          },
          {
            "name": "timestamp",
            "type": "DATETIME",
            "notnull": true,
            "pk": false
          },
          {
            "name": "duration_seconds",
            "type": "FLOAT",
            "notnull": false,
            "pk": false
          },
          {
            "name": "turn_count",
            "type": "INTEGER",
            "notnull": false,
            "pk": false
          },
          {
            "name": "product_id",
            "type": "INTEGER",
            "notnull": false,
            "pk": false
          },
          {
            "name": "sprint_id",
            "type": "INTEGER",
            "notnull": false,
            "pk": false
          },
          {
            "name": "session_id",
            "type": "VARCHAR",
            "notnull": false,
            "pk": false
          },
          {
            "name": "event_metadata",
            "type": "TEXT",
            "notnull": false,
            "pk": false
          }
        ],
        "row_count": 3
      }
    ]
  },
  "products": [
    {
      "product_id": 1,
      "product_name": "Review-First Human-in-the-Loop Extraction Pipeline",
      "created_at": "2026-01-29 12:39:37.253161",
      "total_stories": 2,
      "stories_with_spec_version_id": 1,
      "stories_with_validation_evidence": 1,
      "stories_approved_first_pass": 0,
      "stories_refined": 0,
      "sprint_count": 0,
      "sprint_plan_drafts": 0,
      "sprint_plan_saves": 0,
      "total_sprint_planning_duration_sec": 0.0,
      "avg_sprint_planning_duration_sec": 0.0,
      "spec_versions_count": 2,
      "spec_versions_approved": 2,
      "compiled_authorities_count": 2,
      "spec_accepted_count": 2,
      "spec_rejected_count": 0
    },
    {
      "product_id": 2,
      "product_name": "HashbrownVision Phase 1",
      "created_at": "2026-01-30 18:43:07.321623",
      "total_stories": 5,
      "stories_with_spec_version_id": 3,
      "stories_with_validation_evidence": 3,
      "stories_approved_first_pass": 0,
      "stories_refined": 0,
      "sprint_count": 1,
      "sprint_plan_drafts": 2,
      "sprint_plan_saves": 1,
      "total_sprint_planning_duration_sec": 5072.33,
      "avg_sprint_planning_duration_sec": 5072.33,
      "spec_versions_count": 1,
      "spec_versions_approved": 1,
      "compiled_authorities_count": 1,
      "spec_accepted_count": 1,
      "spec_rejected_count": 0
    },
    {
      "product_id": 4,
      "product_name": "Intelligent Camera System for Counting and Operational Compliance in a Sports Arena",
      "created_at": "2026-02-03 01:45:53.156095",
      "total_stories": 2,
      "stories_with_spec_version_id": 2,
      "stories_with_validation_evidence": 2,
      "stories_approved_first_pass": 0,
      "stories_refined": 0,
      "sprint_count": 0,
      "sprint_plan_drafts": 0,
      "sprint_plan_saves": 0,
      "total_sprint_planning_duration_sec": 0.0,
      "avg_sprint_planning_duration_sec": 0.0,
      "spec_versions_count": 2,
      "spec_versions_approved": 2,
      "compiled_authorities_count": 1,
      "spec_accepted_count": 1,
      "spec_rejected_count": 0
    }
  ],
  "workflow_events": {
    "SPRINT_PLAN_DRAFT": {
      "count": 2,
      "avg_duration_sec": null,
      "total_duration_sec": null,
      "first_event": "2026-01-31 12:43:54.545171",
      "last_event": "2026-02-01 01:24:10.505941"
    },
    "SPRINT_PLAN_SAVED": {
      "count": 1,
      "avg_duration_sec": 5072.33,
      "total_duration_sec": 5072.33,
      "first_event": "2026-02-01 01:24:32.388349",
      "last_event": "2026-02-01 01:24:32.388349"
    }
  },
  "smoke_runs": {
    "total_runs": 24,
    "pipeline_ran_count": 11,
    "alignment_rejected_count": 5,
    "acceptance_blocked_count": 8,
    "contract_passed_count": 3,
    "avg_total_ms": 14752.45,
    "avg_compile_ms": 10431.7,
    "avg_pipeline_ms": 9282.7,
    "avg_validation_ms": 0.2,
    "spec_version_id_match_count": 11,
    "spec_version_id_mismatch_count": 0
  },
  "task_mapping_notes": "\n## Task-to-Event Mapping (T1-T5)\n\nThe database does NOT encode T1-T5 directly. Proposed mapping:\n\n| Task | Description | DB Representation | Notes |\n|------|-------------|-------------------|-------|\n| T1 | Definição de Visão | products.vision, products.created_at | No explicit timing event |\n| T2 | Especificação Técnica | products.technical_spec, spec_registry | No explicit timing event |\n| T3 | Compilação de Autoridade | compiled_spec_authority.compiled_at, spec_authority_acceptance | Timing available via compiled_at |\n| T4 | Geração de Backlog | user_stories.created_at, validation_evidence | Aggregate by product |\n| T5 | Planejamento de Sprint | WorkflowEvent.SPRINT_PLAN_SAVED.duration_seconds | Explicit timing available |\n\n**Caveats:**\n- T1/T2/T4 cycle times must be computed as wall-clock differences between timestamps\n- Baseline manual times are NOT in the database (collected externally)\n- NASA-TLX scores are NOT stored in the database (collected via questionnaire)\n\n**Recommended approach:**\n- Use WorkflowEvent timestamps for T5 (sprint planning) cycle time\n- Use products.created_at and first story created_at for T4 rough estimate\n- Use spec_registry/compiled_spec_authority timestamps for T3\n- T1/T2 timing requires external baseline data or session logs\n"
}